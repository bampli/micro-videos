# Forum

[A 'super' call must be the first statement in the constructor when a class contains initialized properties](https://forum.code.education/forum/topico/a-super-call-must-be-the-first-statement-in-the-constructor-when-a-class-contains-initialized-properties-1436/)

## post-a

Oi Luiz, tudo blz. Obrigado pela resposta. Estou usando Ubuntu. Estava mantendo o Vscode na versão 1.60.2 porque tinha dado problema nas últimas atualizações. Quanto ao Typescript a versão 4.6.4 que uso é a última disponível, li que há previsão de sair a versão 4.7 RC nessa semana. Com a última versão do Vscode 1.67.0, segue o log abaixo, ocorre erro após tentar abrir o remote container: "An error ocurred setting up the container". Estava fugindo das atualizações por causa disso.

Tentei deletar o diretório .devcontainer para gerar um novo mas não resolveu. Alguma dica? Valeu mais uma vez!

```
[119 ms] Remote-Containers 0.194.3 in VS Code 1.67.0 (57fd6d0195bb9b9d1b49f6da5db789060795de47). [118 ms] Start: Resolving Remote [151 ms] Setting up container for folder or workspace: /home/jo/fc2/micro-videos [159 ms] Start: Check Docker is running [159 ms] Start: Run: docker version --format {{.Server.APIVersion}} [232 ms] Server API version: 1.41 [244 ms] Start: Run: docker-compose version --short [885 ms] Start: Run: docker ps -q -a --filter label=com.docker.compose.project=micro-videos --filter label=com.docker.compose.service=app [946 ms] Start: Run: docker inspect --type container 1776040c279f [1003 ms] Start: Removing existing container. [1003 ms] Start: Run: docker rm -f 1776040c279f0fef41c7a4c3303b3903c2d4df31a0b595e848bec058a6817e4b [1171 ms] Start: Run: docker-compose -f /home/jo/fc2/micro-videos/docker-compose.yaml -f /home/jo/fc2/micro-videos/docker-compose.override.yaml -f /home/jo/fc2/micro-videos/.devcontainer/docker-compose.yml config [1857 ms] services: app: build: context: /home/jo/fc2/micro-videos command: /bin/sh -c "while sleep 1000; do :; done" container_name: micro-videos-app volumes: - /home/jo/fc2/micro-videos/.docker/zsh/powerlevel10k/.p10k.zsh:/home/node/.p10k.zsh:delegated - /home/jo/fc2/micro-videos:/home/node/app:cached - /home/jo/fc2/micro-videos/.docker/zsh/history:/home/node/zsh:delegated version: '3' [1858 ms] [1861 ms] Start: Run: docker -v [1910 ms] Start: Run: docker events --format {{json .}} --filter event=start [1917 ms] Start: Run: docker-compose --project-name micro-videos -f /home/jo/fc2/micro-videos/docker-compose.yaml -f /home/jo/fc2/micro-videos/docker-compose.override.yaml -f /home/jo/fc2/micro-videos/.devcontainer/docker-compose.yml build Building app Sending build context to Docker daemon 250.3MB Step 1/8 : FROM node:16.14.0-slim ---> d686058b9904 Step 2/8 : RUN apt update && apt install -y git ca-certificates default-jre zsh curl wget fonts-powerline ---> Using cache ---> 9041a648e79f Step 3/8 : ENV JAVA_HOME="/usr/lib/jvm/java-11-openjdk-amd64" ---> Using cache ---> 7ec09eab3781 Step 4/8 : USER node ---> Using cache ---> 4ffab47f1f69 Step 5/8 : WORKDIR /home/node/app ---> Using cache ---> dd995a44d01f Step 6/8 : RUN sh -c "$(wget -O- https://github.com/deluan/zsh-in-docker/releases/download/v1.1.2/zsh-in-docker.sh)" -- -t https://github.com/romkatv/powerlevel10k -p git -p git-flow -p https://github.com/zdharma-continuum/fast-syntax-highlighting -p https://github.com/zsh-users/zsh-autosuggestions -p https://github.com/zsh-users/zsh-completions -a 'export TERM=xterm-256color' ---> Using cache ---> 4147ee3dbbc3 Step 7/8 : RUN echo '[[ ! -f ~/.p10k.zsh ]] || source ~/.p10k.zsh' >> ~/.zshrc && echo 'HISTFILE=/home/node/zsh/.zsh_history' >> ~/.zshrc ---> Using cache ---> 579ecba503a7 Step 8/8 : CMD [ "sh", "-c", "npm install && tail -f /dev/null" ] ---> Using cache ---> d5d3f7779e7b Successfully built d5d3f7779e7b Successfully tagged micro-videos_app:latest [5885 ms] Start: Run: docker inspect --type image micro-videos_app [5941 ms] Start: Run: docker build -f /tmp/vsch/updateUID.Dockerfile-0.194.3 -t vsc-micro-videos-0386fb4fd626d9e946dc85d9556a3856-uid --build-arg BASE_IMAGE=micro-videos_app --build-arg REMOTE_USER=node --build-arg NEW_UID=1000 --build-arg NEW_GID=1000 --build-arg IMAGE_USER=node /tmp/vsch Sending build context to Docker daemon 144.3MB Step 1/10 : ARG BASE_IMAGE Step 2/10 : FROM $BASE_IMAGE ---> d5d3f7779e7b Step 3/10 : USER root ---> Using cache ---> 2c89527e5b18 Step 4/10 : ARG REMOTE_USER ---> Using cache ---> 947a9330d096 Step 5/10 : ARG NEW_UID ---> Using cache ---> 298423c1679c Step 6/10 : ARG NEW_GID ---> Using cache ---> 2c56a6005047 Step 7/10 : SHELL ["/bin/sh", "-c"] ---> Using cache ---> 6e488ff12d9c Step 8/10 : RUN eval $(sed -n "s/${REMOTE_USER}:[^:]*:\([^:]*\):\([^:]*\):[^:]*:\([^:]*\).*/OLD_UID=\1;OLD_GID=\2;HOME_FOLDER=\3/p" /etc/passwd); eval $(sed -n "s/\([^:]*\):[^:]*:${NEW_UID}:.*/EXISTING_USER=\1/p" /etc/passwd); eval $(sed -n "s/\([^:]*\):[^:]*:${NEW_GID}:.*/EXISTING_GROUP=\1/p" /etc/group); if [ -z "$OLD_UID" ]; then echo "Remote user not found in /etc/passwd ($REMOTE_USER)."; elif [ "$OLD_UID" = "$NEW_UID" -a "$OLD_GID" = "$NEW_GID" ]; then echo "UIDs and GIDs are the same ($NEW_UID:$NEW_GID)."; elif [ "$OLD_UID" != "$NEW_UID" -a -n "$EXISTING_USER" ]; then echo "User with UID exists ($EXISTING_USER=$NEW_UID)."; elif [ "$OLD_GID" != "$NEW_GID" -a -n "$EXISTING_GROUP" ]; then echo "Group with GID exists ($EXISTING_GROUP=$NEW_GID)."; else echo "Updating UID:GID from $OLD_UID:$OLD_GID to $NEW_UID:$NEW_GID."; sed -i -e "s/\(${REMOTE_USER}:[^:]*:\)[^:]*:[^:]*/\1${NEW_UID}:${NEW_GID}/" /etc/passwd; if [ "$OLD_GID" != "$NEW_GID" ]; then sed -i -e "s/\([^:]*:[^:]*:\)${OLD_GID}:/\1${NEW_GID}:/" /etc/group; fi; chown -R $NEW_UID:$NEW_GID $HOME_FOLDER; fi; ---> Using cache ---> 5921ef1acdcf Step 9/10 : ARG IMAGE_USER ---> Using cache ---> 6967b4491114 Step 10/10 : USER $IMAGE_USER ---> Using cache ---> f2f654986edc Successfully built f2f654986edc Successfully tagged vsc-micro-videos-0386fb4fd626d9e946dc85d9556a3856-uid:latest [7256 ms] Start: Run: docker-compose --project-name micro-videos -f /home/jo/fc2/micro-videos/docker-compose.yaml -f /home/jo/fc2/micro-videos/docker-compose.override.yaml -f /home/jo/fc2/micro-videos/.devcontainer/docker-compose.yml -f /tmp/docker-compose.devcontainer.containerFeatures-1652126096283.yml up -d Creating micro-videos-app ... done [8773 ms] Start: Run: docker ps -q -a --filter label=com.docker.compose.project=micro-videos --filter label=com.docker.compose.service=app [8836 ms] Start: Run: docker inspect --type container e9661dc2f5ab [8892 ms] Start: Inspecting container [8892 ms] Start: Run: docker inspect --type container e9661dc2f5ab73b85deb3ea3f029b5dbb926e0bf15773c669a07be92d5e984bc [8949 ms] Start: Run in container: /bin/sh [8955 ms] Start: Run in container: uname -m [9120 ms] x86_64 [9121 ms] [9122 ms] Start: Run in container: (cat /etc/os-release || cat /usr/lib/os-release) 2>/dev/null [9124 ms] PRETTY_NAME="Debian GNU/Linux 10 (buster)" NAME="Debian GNU/Linux" VERSION_ID="10" VERSION="10 (buster)" VERSION_CODENAME=buster ID=debian HOME_URL="https://www.debian.org/" SUPPORT_URL="https://www.debian.org/support" BUG_REPORT_URL="https://bugs.debian.org/" [9125 ms] [9125 ms] Start: Run in container: cat /etc/passwd [9128 ms] Start: Updating configuration state [9137 ms] Start: Setup shutdown monitor [9138 ms] Forking shutdown monitor: /home/jo/.vscode/extensions/ms-vscode-remote.remote-containers-0.194.3/dist/shutdown/shutdownMonitorProcess /run/user/1000/vscode-remote-containers-c48729471f2ca43ea554d63ab8e1392e235e9dd7.sock dockerCompose Debug /home/jo/.config/Code/logs/20220509T165319/exthost1/ms-vscode-remote.remote-containers 1652126089027 [9146 ms] Start: Run in container: test -d /home/node/.vscode-server [9148 ms] [9148 ms] [9148 ms] Exit code 1 [9149 ms] Start: Run in container: test -d /home/node/.vscode-remote [9150 ms] [9151 ms] [9151 ms] Exit code 1 [9151 ms] Start: Run in container: test -f /var/vscode-server/.patchEtcEnvironmentMarker [9153 ms] [9154 ms] [9154 ms] Exit code 1 [9155 ms] Start: Run in container: /bin/sh [9163 ms] Start: Run in container: test ! -f '/var/vscode-server/.patchEtcEnvironmentMarker' && set -o noclobber && mkdir -p '/var/vscode-server' && { > '/var/vscode-server/.patchEtcEnvironmentMarker' ; } 2> /dev/null [9323 ms] [9324 ms] [9324 ms] Start: Run in container: cat >> /etc/environment <<'etcEnvrionmentEOF' [9327 ms] [9327 ms] [9327 ms] Start: Run in container: test -f /var/vscode-server/.patchEtcProfileMarker [9329 ms] [9329 ms] [9329 ms] Exit code 1 [9330 ms] Start: Run in container: test ! -f '/var/vscode-server/.patchEtcProfileMarker' && set -o noclobber && mkdir -p '/var/vscode-server' && { > '/var/vscode-server/.patchEtcProfileMarker' ; } 2> /dev/null [9333 ms] [9333 ms] [9333 ms] Start: Run in container: sed -i -E 's/((^|\s)PATH=)([^\$]*)$/\1${PATH:-\3}/g' /etc/profile || true [9337 ms] [9337 ms] [9338 ms] Start: Run in container: test ! -f '/home/node/.vscode-server/data/Machine/.writeMachineSettingsMarker' && set -o noclobber && mkdir -p '/home/node/.vscode-server/data/Machine' && { > '/home/node/.vscode-server/data/Machine/.writeMachineSettingsMarker' ; } 2> /dev/null [9340 ms] [9341 ms] [9342 ms] Start: Run in container: mkdir -p '/home/node/.vscode-server/data/Machine' && cat >'/home/node/.vscode-server/data/Machine/settings.json' <<'settingsJSON' [9348 ms] [9348 ms] [9348 ms] Start: Run in container: test -d /home/node/.vscode-server/bin/57fd6d0195bb9b9d1b49f6da5db789060795de47 [9350 ms] [9350 ms] [9350 ms] Exit code 1 [9351 ms] Installing VS Code Server for commit 57fd6d0195bb9b9d1b49f6da5db789060795de47 [9351 ms] Start: Installing VS Code Server [9351 ms] Start: Run in container: mkdir -p /home/node/.vscode-server/bin/57fd6d0195bb9b9d1b49f6da5db789060795de47_1652126098378 [9354 ms] [9354 ms] [9433 ms] Start: Run in container: (dd iflag=fullblock bs=8192 count=6732 2>/dev/null; dd iflag=fullblock bs=2894 count=1 2>/dev/null) | tar --no-same-owner -xz --strip-components 1 -C /home/node/.vscode-server/bin/57fd6d0195bb9b9d1b49f6da5db789060795de47_1652126098378 [10989 ms] [10989 ms] [10990 ms] Start: Run in container: mv -n /home/node/.vscode-server/bin/57fd6d0195bb9b9d1b49f6da5db789060795de47_1652126098378 /home/node/.vscode-server/bin/57fd6d0195bb9b9d1b49f6da5db789060795de47 [10993 ms] [10993 ms] [10994 ms] Start: Launching Remote-Containers helper. [10995 ms] Start: Run: gpgconf --list-dir agent-extra-socket [11009 ms] /run/user/1000/gnupg/S.gpg-agent.extra [11009 ms] [11010 ms] Start: Run in container: gpgconf --list-dir agent-socket [11012 ms] [11012 ms] /bin/sh: 19: gpgconf: not found [11012 ms] Exit code 127 [11015 ms] userEnvProbe: loginInteractiveShell (default) [11016 ms] userEnvProbe shell: /bin/bash [11017 ms] Start: Run in container: cat <<'EOF-/tmp/vscode-remote-containers-e6655539b810be9ecf37ec24cec132bc3538807f.js' >/tmp/vscode-remote-containers-e6655539b810be9ecf37ec24cec132bc3538807f.js [11019 ms] [11020 ms] [11020 ms] Start: Run in container: # Test for /home/node/.ssh/known_hosts and ssh [11023 ms] [11024 ms] [11024 ms] Start: Run in container: cat <<'EOF-/tmp/vscode-remote-containers-server-e6655539b810be9ecf37ec24cec132bc3538807f.js' >/tmp/vscode-remote-containers-server-e6655539b810be9ecf37ec24cec132bc3538807f.js [11027 ms] [11028 ms] [11028 ms] Start: Run in container: # Copy /home/jo/.ssh/known_hosts to /home/node/.ssh/known_hosts [11029 ms] Start: Run in container: /home/node/.vscode-server/bin/57fd6d0195bb9b9d1b49f6da5db789060795de47/node /tmp/vscode-remote-containers-server-e6655539b810be9ecf37ec24cec132bc3538807f.js [11048 ms] [11049 ms] [11049 ms] Start: Run in container: command -v git >/dev/null 2>&1 && git config --system credential.helper '!f() { /home/node/.vscode-server/bin/57fd6d0195bb9b9d1b49f6da5db789060795de47/node /tmp/vscode-remote-containers-e6655539b810be9ecf37ec24cec132bc3538807f.js $*; }; f' || true [11054 ms] [11054 ms] [11055 ms] Start: Preparing Extensions [11055 ms] Start: Run in container: test ! -f '/home/node/.vscode-server/data/Machine/.installExtensionsMarker' && set -o noclobber && mkdir -p '/home/node/.vscode-server/data/Machine' && { > '/home/node/.vscode-server/data/Machine/.installExtensionsMarker' ; } 2> /dev/null [11057 ms] [11058 ms] [11060 ms] Extensions cache, install extensions: firsttris.vscode-jest-runner, ms-vscode-remote.remote-containers, streetsidesoftware.code-spell-checker, naumovs.color-highlight, donjayamanne.githistory, esbenp.prettier-vscode, visualstudioexptteam.vscodeintellicode, dbaeumer.vscode-eslint, ms-vscode.vscode-typescript-tslint-plugin, mikestead.dotenv, hazer.reactcodesnippets, bmewburn.vscode-intelephense-client, shan.code-settings-sync, christian-kohler.path-intellisense, oderwat.indent-rainbow [11060 ms] Start: Run in container: test -d /home/node/.vscode-server/extensionsCache && ls /home/node/.vscode-server/extensionsCache || true [11062 ms] [11062 ms] [11063 ms] Extensions cache, copy to remote: bmewburn.vscode-intelephense-client-1.8.2, christian-kohler.path-intellisense-2.8.0, dbaeumer.vscode-eslint-2.2.1, donjayamanne.githistory-0.6.19, esbenp.prettier-vscode-9.5.0, firsttris.vscode-jest-runner-0.4.47, hazer.reactcodesnippets-1.2.1, mikestead.dotenv-1.0.1, ms-vscode-remote.remote-containers-0.194.3, ms-vscode.vscode-typescript-tslint-plugin-1.3.4, naumovs.color-highlight-2.5.0, oderwat.indent-rainbow-8.3.1, shan.code-settings-sync-3.4.3, streetsidesoftware.code-spell-checker-2.1.11, visualstudioexptteam.vscodeintellicode-1.2.20 [11164 ms] Start: Run in container: # Copy extensions to remote [11387 ms] userEnvProbe PATHs: Probe: '/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin' Container: '/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin' [11388 ms] [11388 ms] [11389 ms] Start: Run in container: for pid in `cd /proc && ls -d [0-9]*`; do { echo $pid ; readlink /proc/$pid/cwd ; readlink /proc/$pid/ns/mnt ; cat /proc/$pid/stat | tr " [11444 ms] Start: Starting VS Code Server [11444 ms] Start: Run in container: /home/node/.vscode-server/bin/57fd6d0195bb9b9d1b49f6da5db789060795de47/server.sh --log debug --force-disable-user-env --use-host-proxy --disable-telemetry --port 0 --extensions-download-dir /home/node/.vscode-server/extensionsCache --install-extension firsttris.vscode-jest-runner --install-extension ms-vscode-remote.remote-containers --install-extension streetsidesoftware.code-spell-checker --install-extension naumovs.color-highlight --install-extension donjayamanne.githistory --install-extension esbenp.prettier-vscode --install-extension visualstudioexptteam.vscodeintellicode --install-extension dbaeumer.vscode-eslint --install-extension ms-vscode.vscode-typescript-tslint-plugin --install-extension mikestead.dotenv --install-extension hazer.reactcodesnippets --install-extension bmewburn.vscode-intelephense-client --install-extension shan.code-settings-sync --install-extension christian-kohler.path-intellisense --install-extension oderwat.indent-rainbow --start-server --disable-websocket-compression [11508 ms] * * Visual Studio Code Server * * By using the software, you agree to * the Visual Studio Code Server License Terms (https://aka.ms/vscode-server-license) and * the Microsoft Privacy Statement (https://privacy.microsoft.com/en-US/privacystatement). * [11508 ms] To accept the license terms, start the server with --accept-server-license-terms [11514 ms] Command failed: /home/node/.vscode-server/bin/57fd6d0195bb9b9d1b49f6da5db789060795de47/server.sh --log debug --force-disable-user-env --use-host-proxy --disable-telemetry --port 0 --extensions-download-dir /home/node/.vscode-server/extensionsCache --install-extension firsttris.vscode-jest-runner --install-extension ms-vscode-remote.remote-containers --install-extension streetsidesoftware.code-spell-checker --install-extension naumovs.color-highlight --install-extension donjayamanne.githistory --install-extension esbenp.prettier-vscode --install-extension visualstudioexptteam.vscodeintellicode --install-extension dbaeumer.vscode-eslint --install-extension ms-vscode.vscode-typescript-tslint-plugin --install-extension mikestead.dotenv --install-extension hazer.reactcodesnippets --install-extension bmewburn.vscode-intelephense-client --install-extension shan.code-settings-sync --install-extension christian-kohler.path-intellisense --install-extension oderwat.indent-rainbow --start-server --disable-websocket-compression [21565 ms] Extensions cache, remote removals: None
```

## post-b

Oi Luiz,

Desculpe mas não sei o que houve com a formatação, parece que virou tudo texto corrido. Não consigo também ver o preview ao lado.

Com relação ao erro no construtor, resolvi invertendo as linhas como sugerido. Acompanhei uma issue no github/typescript bem acaloradas sobre super() ser o primeiro statement. Concordo com vc que nesse caso não há problema em criar o base-object para validar depois.

Obrigado pela dica do tsc:check, reparei que havia um erro que  tinha passado despercebido. Surgiu então mais uma dúvida, não sei se seria melhor abrir novo thread mas em todo caso, segue abaixo.

Ocorre em runRule, na chamada method.apply():

```
function runRule({
    value,
    property,
    rule,
    params = []
}: Omit<ExpectedRule, "error">) {
    const validator = ValidatorRules.values(value, property);
    const method = validator[rule];
    method.apply(validator, params);
}
```

```
The 'this' context of type '(() => Omit<ValidatorRules, "string">) | (() => Omit<ValidatorRules, "boolean">) | (() => Omit<ValidatorRules, "required">) | ((max: number) => Omit<...>)' is not assignable to method's 'this' of type '(this: ValidatorRules) => Omit<ValidatorRules, "string">'.
  Type '() => Omit<ValidatorRules, "boolean">' is not assignable to type '(this: ValidatorRules) => Omit<ValidatorRules, "string">'.
    Property 'boolean' is missing in type 'Omit<ValidatorRules, "boolean">' but required in type 'Omit<ValidatorRules, "string">'.ts(2684)
```

Só consegui resolver trocando de 'private' para 'public' o parametro 'value' do construtor em 'validator-rules.ts' , como visto abaixo. Não entendi bem o motivo.

```
export default class ValidatorRules {
    private constructor( private value: any,  private property: string) { }
```

Solução que eliminou todos os erros. Deu green! Porque?

```
export default class ValidatorRules {
    private constructor( public value: any,  private property: string) { }
```



